<!DOCTYPE html>
<meta charset=utf-8>
<title>jxu blog</title>
<h1 id="c-indent-styles">C Indent Styles</h1>
<p>A long time ago, when I first started using C++, I had to decide on
an indentation style. Eventually I settled on Allman style, because I
liked the braces lining up vertically instead of way off to the right.
In recent years, I've been reading a lot more C source code, like that
of the linux kernel, glibc, GNU coreutils, bsdutils, etc., and I've even
been writing a little C. I never came across a single codebase that used
Allman, as all were variations of "opening brace on the same line". This
prompted me to do a quick search of popular C projects I know of to see
what indent styles were in common use.</p>
<p>Definitions I used (I didn't come up with these names):</p>
<ul>
<li>1TBS: opening brace on the same line, closing brace on its own
line</li>
<li>K&amp;R: same as 1TBS, but function opening brace gets its own
line</li>
<li>Allman: opening brace always gets its own line</li>
<li>GNU: cursed style that puts braces halfway between indentation
(??)</li>
</ul>
<p>Here are the results (I only looked at one source file and assumed it
was used consistently throughout the project):</p>
<ul>
<li>1TBS: redis, micropython, sway, systemd, webview</li>
<li>K&amp;R: linux, obs-studio, ffmpeg, php-src, curl, tmux, jq, rufus,
mpv, openssl, musl, zstd, nginx, openwrt, libsodium</li>
<li>Allman: HandBrake, postgres, reactos, vlc, glfw</li>
<li>GNU: bash, coreutils, glibc</li>
<li>???: ImageMagick</li>
</ul>
<p>As you can see, K&amp;R dominates, with 1TBS coming in second. Allman
style tends to be used in code with longer function and variable names,
as it makes it easier to find the opening brace. GNU is only used by GNU
projects because it sucks and doesn't make sense. ImageMagick's is the
weirdest I've ever seen, where code inside the opening and close braces
gets indented 2 spaces, and then for if statements the code block with
the braces gets indented again? I don't know but it's closest to
GNU.</p>
<p>I'm experimenting with writing K&amp;R, but I still haven't decided
if I'll switch. I like saving the vertical space when scrolling through
code, but I don't like the braces not lining up.</p>
